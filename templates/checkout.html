{% extends "base.html" %}

{% block title %}Checkout - Phew !! Event Management{% endblock %}

{% block content %}
<!-- Page Header -->
<section class="bg-gradient-to-r from-primary to-secondary py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-5xl font-bold text-white mb-4">
            <i class="fas fa-credit-card mr-4"></i>Checkout
        </h1>
        <p class="text-xl text-white opacity-90">
            Complete your order and book your perfect event
        </p>
    </div>
</section>

<!-- Checkout Content -->
<section class="py-16 bg-gradient-to-br from-yellow-50 to-orange-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            
            <!-- Customer Information Form -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                <div class="bg-gradient-to-r from-primary to-secondary p-6">
                    <h2 class="text-2xl font-bold text-white">
                        <i class="fas fa-user mr-2"></i>Customer Information
                    </h2>
                </div>
                
                <form method="POST" class="p-6 space-y-6">
                    <div>
                        <label for="name" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-user mr-1"></i>Full Name *
                        </label>
                        <input type="text" id="name" name="name" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-300"
                               placeholder="Enter your full name">
                    </div>

                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-envelope mr-1"></i>Email Address *
                        </label>
                        <input type="email" id="email" name="email" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-300"
                               placeholder="Enter your email address">
                    </div>

                    <div>
                        <label for="phone" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-phone mr-1"></i>Phone Number *
                        </label>
                        <input type="tel" id="phone" name="phone" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-300"
                               placeholder="Enter your phone number">
                    </div>

                    <div>
                        <label for="event_date" class="block text-sm font-medium text-gray-700 mb-2">
                            <i class="fas fa-calendar-alt mr-1"></i>Event Date *
                        </label>
                        <input type="date" id="event_date" name="event_date" required
                               class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition duration-300"
                               min="{{ (moment() + timedelta(days=7)).strftime('%Y-%m-%d') if moment else '' }}">
                        <p class="text-xs text-gray-500 mt-1">Event must be scheduled at least 7 days in advance</p>
                    </div>

                    <!-- Additional Information -->
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h3 class="text-lg font-semibold text-gray-900 mb-3">
                            <i class="fas fa-info-circle mr-2"></i>Additional Information
                        </h3>
                        <div class="space-y-3 text-sm text-gray-600">
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>Our event coordinator will contact you within 24 hours</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>Free consultation to customize your event package</span>
                            </div>
                            <div class="flex items-start">
                                <i class="fas fa-check text-green-500 mr-2 mt-0.5"></i>
                                <span>Full refund available up to 48 hours before event date</span>
                            </div>
                        </div>
                    </div>

                    <!-- Submit Button -->
                    <button type="submit" 
                            class="w-full bg-gradient-to-r from-primary to-secondary hover:from-secondary hover:to-accent text-white py-4 px-6 rounded-lg font-semibold text-lg transition duration-300 transform hover:scale-105 shadow-lg">
                        <i class="fas fa-check mr-2"></i>Complete Order
                    </button>

                    <div class="text-center">
                        <div class="flex items-center justify-center text-gray-600 text-sm">
                            <i class="fas fa-shield-alt mr-2 text-green-500"></i>
                            Your information is secure and encrypted
                        </div>
                    </div>
                </form>
            </div>

            <!-- Order Summary -->
            <div class="bg-white rounded-xl shadow-lg overflow-hidden h-fit">
                <div class="bg-gradient-to-r from-accent to-dark p-6">
                    <h2 class="text-2xl font-bold text-white">
                        <i class="fas fa-receipt mr-2"></i>Order Summary
                    </h2>
                </div>
                
                <div class="p-6">
                    <!-- Order Items -->
                    <div class="space-y-4 mb-6">
                        {% for item in cart_items %}
                        <div class="flex items-center border-b pb-4">
                            <div class="w-12 h-12 bg-gradient-to-br from-primary to-secondary rounded-lg flex items-center justify-center mr-4 flex-shrink-0">
                                {% if 'Birthday' in item.service_name %}
                                    <i class="fas fa-birthday-cake text-white"></i>
                                {% elif 'Baby' in item.service_name %}
                                    <i class="fas fa-baby text-white"></i>
                                {% elif 'Wedding' in item.service_name %}
                                    <i class="fas fa-heart text-white"></i>
                                {% elif 'Pre-Wedding' in item.service_name %}
                                    <i class="fas fa-rings-wedding text-white"></i>
                                {% elif 'Corporate' in item.service_name %}
                                    <i class="fas fa-briefcase text-white"></i>
                                {% elif 'House' in item.service_name %}
                                    <i class="fas fa-home text-white"></i>
                                {% elif 'Anniversary' in item.service_name %}
                                    <i class="fas fa-heart text-white"></i>
                                {% else %}
                                    <i class="fas fa-star text-white"></i>
                                {% endif %}
                            </div>
                            <div class="flex-1">
                                <h3 class="font-semibold text-gray-900">{{ item.service_name }}</h3>
                                <p class="text-sm text-gray-600">Professional event management package</p>
                            </div>
                            <div class="text-right">
                                <div class="font-bold text-accent">₹{{ "%.2f"|format(item.service_price) }}</div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>

                    <!-- Pricing Breakdown -->
                    <div class="space-y-3 mb-6">
                        <div class="flex justify-between text-lg">
                            <span class="text-gray-600">Subtotal</span>
                            <span class="font-semibold">₹{{ "%.2f"|format(total) }}</span>
                        </div>
                        
                        <div class="flex justify-between text-lg">
                            <span class="text-gray-600">Service Fee</span>
                            <span class="font-semibold">₹0.00</span>
                        </div>
                        
                        <div class="flex justify-between text-lg text-green-600">
                            <span>Early Bird Discount</span>
                            <span class="font-semibold">-₹0.00</span>
                        </div>
                        
                        <hr class="my-4">
                        
                        <div class="flex justify-between text-xl">
                            <span class="font-bold text-gray-900">Total</span>
                            <span class="font-bold text-accent text-2xl">₹{{ "%.2f"|format(total) }}</span>
                        </div>
                    </div>

                    <!-- Payment Info -->
                    <div class="bg-blue-50 rounded-lg p-4 mb-6">
                        <h3 class="text-lg font-semibold text-blue-900 mb-2">
                            <i class="fas fa-info-circle mr-2"></i>Payment Information
                        </h3>
                        <div class="space-y-2 text-sm text-blue-800">
                            <p><strong>Payment Method:</strong> Email Invoice</p>
                            <p><strong>Payment Terms:</strong> 50% advance, 50% before event</p>
                            <p><strong>Accepted Methods:</strong> Bank Transfer, Credit Card, PayPal</p>
                        </div>
                    </div>

                    <!-- Contact Support -->
                    <div class="text-center">
                        <p class="text-sm text-gray-600 mb-4">Need help with your order?</p>
                        <a href="{{ url_for('contact') }}" 
                           class="inline-flex items-center text-accent hover:text-dark font-medium text-sm transition duration-300">
                            <i class="fas fa-headset mr-2"></i>Contact Support
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Trust Indicators -->
        <div class="mt-12 bg-white rounded-xl shadow-lg p-8">
            <h3 class="text-2xl font-bold text-gray-900 text-center mb-8">Why Choose Phew !! ?</h3>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center">
                <div>
                    <div class="w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-shield-alt text-green-600 text-2xl"></i>
                    </div>
                    <h4 class="font-semibold text-gray-900 mb-2">Secure & Safe</h4>
                    <p class="text-gray-600 text-sm">Your data and payments are fully protected</p>
                </div>
                
                <div>
                    <div class="w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-award text-blue-600 text-2xl"></i>
                    </div>
                    <h4 class="font-semibold text-gray-900 mb-2">Award Winning</h4>
                    <p class="text-gray-600 text-sm">Recognized for excellence in event management</p>
                </div>
                
                <div>
                    <div class="w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-users text-purple-600 text-2xl"></i>
                    </div>
                    <h4 class="font-semibold text-gray-900 mb-2">Expert Team</h4>
                    <p class="text-gray-600 text-sm">Professional planners with years of experience</p>
                </div>
                
                <div>
                    <div class="w-16 h-16 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-4">
                        <i class="fas fa-clock text-yellow-600 text-2xl"></i>
                    </div>
                    <h4 class="font-semibold text-gray-900 mb-2">24/7 Support</h4>
                    <p class="text-gray-600 text-sm">Round-the-clock assistance for your events</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- JavaScript for form validation and date picker -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Set minimum date to 7 days from today
        const today = new Date();
        const minDate = new Date(today.getTime() + (7 * 24 * 60 * 60 * 1000));
        const dateInput = document.getElementById('event_date');
        dateInput.min = minDate.toISOString().split('T')[0];
        
        // Form submission handling
        const form = document.querySelector('form');
        form.addEventListener('submit', function(e) {
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>Processing Order...';
            submitBtn.disabled = true;
        });
    });
</script>
{% endblock %}